# 🎯 רשימת כל סוגי ההנחות והקופונים

## 📋 סקירה כללית

מערכת ההנחות והקופונים תומכת במגוון רחב של סוגי הנחות, כל אחת עם תנאים והגדרות משלה.

---

## 🎫 סוגי הנחות לפי מקור

### 1. הנחות אוטומטיות (Automatic Discounts)
הנחות שמוחלות אוטומטית ללא צורך בקוד קופון.

**תכונות:**
- ✅ מוחלות אוטומטית
- ✅ עדיפות גבוהה יותר מקופונים
- ✅ תמיכה בכל סוגי התנאים
- ✅ אפשרות למנוע שילוב עם קופונים

### 2. קופונים (Discount Codes)
הנחות שדורשות קוד קופון.

**תכונות:**
- ✅ דורש קוד קופון
- ✅ עדיפות נמוכה יותר מהנחות אוטומטיות
- ✅ מעקב שימוש
- ✅ אפשרות למנוע שילוב עם הנחות אוטומטיות

---

## 💰 סוגי הנחות לפי סוג חישוב

### 1. Percentage (אחוז הנחה)
הנחה באחוזים מהמחיר.

**דוגמאות:**
- 10% הנחה על כל המוצרים
- 20% הנחה על קטגוריה מסוימת
- 15% הנחה ללקוחות VIP

**חישוב:**
```
הנחה = (מחיר × אחוז) / 100
```

### 2. Fixed Amount (סכום קבוע)
הנחה בסכום קבוע.

**דוגמאות:**
- ₪50 הנחה על הזמנה מעל ₪300
- ₪100 הנחה ללקוחות חדשים
- ₪25 הנחה על מוצר מסוים

**חישוב:**
```
הנחה = min(סכום קבוע, מחיר)
```

### 3. Free Shipping (משלוח חינם)
משלוח חינם.

**דוגמאות:**
- משלוח חינם על הזמנות מעל ₪200
- משלוח חינם ללקוחות VIP
- משלוח חינם עם קופון

---

## 🎯 סוגי הנחות לפי תנאים

### 1. לפי סכום הזמנה

#### Minimum Order Amount (סכום מינימום)
הנחה שפועלת רק אם סכום ההזמנה מעל סכום מסוים.

**דוגמאות:**
- 10% הנחה על הזמנות מעל ₪500
- ₪50 הנחה על הזמנות מעל ₪1000
- משלוח חינם על הזמנות מעל ₪200

#### Maximum Order Amount (סכום מקסימום)
הנחה שפועלת רק אם סכום ההזמנה מתחת לסכום מסוים.

**דוגמאות:**
- 5% הנחה על הזמנות עד ₪300 (לעודד הזמנות קטנות)
- ₪20 הנחה על הזמנות עד ₪200

#### Order Amount Range (טווח סכום)
הנחה שפועלת בטווח סכום מסוים.

**דוגמאות:**
- 10% הנחה על הזמנות בין ₪500 ל-₪1000
- ₪30 הנחה על הזמנות בין ₪200 ל-₪500

### 2. לפי כמות פריטים

#### Minimum Quantity (כמות מינימום)
הנחה שפועלת רק אם כמות הפריטים מעל כמות מסוימת.

**דוגמאות:**
- 10% הנחה על 3+ פריטים
- ₪20 הנחה על 5+ פריטים
- משלוח חינם על 10+ פריטים

#### Maximum Quantity (כמות מקסימום)
הנחה שפועלת רק אם כמות הפריטים מתחת לכמות מסוימת.

**דוגמאות:**
- 5% הנחה על עד 2 פריטים
- ₪10 הנחה על עד 3 פריטים

#### Quantity Range (טווח כמות)
הנחה שפועלת בטווח כמות מסוים.

**דוגמאות:**
- 15% הנחה על 3-5 פריטים
- ₪30 הנחה על 5-10 פריטים

### 3. לפי מוצרים

#### All Products (כל המוצרים)
הנחה שפועלת על כל המוצרים.

**דוגמאות:**
- 10% הנחה על כל המוצרים
- ₪50 הנחה על כל ההזמנה

#### Specific Products (מוצרים ספציפיים)
הנחה שפועלת רק על מוצרים מסוימים.

**דוגמאות:**
- 20% הנחה על מוצר X
- ₪30 הנחה על מוצר Y
- משלוח חינם על מוצר Z

#### Specific Collections (קטגוריות ספציפיות)
הנחה שפועלת רק על מוצרים בקטגוריות מסוימות.

**דוגמאות:**
- 15% הנחה על כל המוצרים בקטגוריה "חורף"
- ₪40 הנחה על כל המוצרים בקטגוריה "מבצעים"
- משלוח חינם על כל המוצרים בקטגוריה "כבד"

#### Specific Tags (תגיות ספציפיות)
הנחה שפועלת רק על מוצרים עם תגיות מסוימות.

**דוגמאות:**
- 10% הנחה על מוצרים עם תגית "חדש"
- ₪25 הנחה על מוצרים עם תגית "מבצע"
- משלוח חינם על מוצרים עם תגית "מהיר"

### 4. לפי לקוח

#### All Customers (כל הלקוחות)
הנחה שפועלת על כל הלקוחות.

**דוגמאות:**
- 10% הנחה לכל הלקוחות
- משלוח חינם על הזמנות מעל ₪200

#### VIP Customers (לקוחות VIP)
הנחה שפועלת רק על לקוחות VIP.

**דוגמאות:**
- 20% הנחה ללקוחות VIP
- ₪100 הנחה ללקוחות VIP
- משלוח חינם ללקוחות VIP

#### New Customers (לקוחות חדשים)
הנחה שפועלת רק על לקוחות חדשים.

**דוגמאות:**
- 15% הנחה ללקוחות חדשים
- ₪50 הנחה ללקוחות חדשים
- משלוח חינם ללקוחות חדשים

#### Returning Customers (לקוחות חוזרים)
הנחה שפועלת רק על לקוחות חוזרים.

**דוגמאות:**
- 10% הנחה ללקוחות חוזרים
- ₪30 הנחה ללקוחות חוזרים

#### By Orders Count (לפי מספר הזמנות)
הנחה שפועלת לפי מספר הזמנות קודמות.

**דוגמאות:**
- 10% הנחה ללקוחות עם 5+ הזמנות
- ₪50 הנחה ללקוחות עם 10+ הזמנות

#### By Lifetime Value (לפי ערך חיים)
הנחה שפועלת לפי ערך חיים של הלקוח.

**דוגמאות:**
- 15% הנחה ללקוחות עם ערך חיים מעל ₪5000
- ₪100 הנחה ללקוחות עם ערך חיים מעל ₪10000

### 5. לפי זמן

#### Date Range (טווח תאריכים)
הנחה שפועלת בטווח תאריכים מסוים.

**דוגמאות:**
- 20% הנחה בתאריכים 1-15 בחודש
- ₪50 הנחה בתאריכים 20-31 בחודש
- משלוח חינם בחודש דצמבר

#### Day of Week (יום בשבוע)
הנחה שפועלת בימים מסוימים בשבוע.

**דוגמאות:**
- 10% הנחה בימי ראשון
- ₪20 הנחה בימי שישי
- משלוח חינם בסופי שבוע

#### Time of Day (שעה ביום)
הנחה שפועלת בשעות מסוימות ביום.

**דוגמאות:**
- 5% הנחה בשעות 10:00-14:00
- ₪15 הנחה בשעות 20:00-22:00
- משלוח חינם בשעות הבוקר

---

## 🔄 שילובי הנחות

### 1. Single Discount (הנחה אחת)
הנחה אחת בלבד.

**דוגמאות:**
- הנחה אוטומטית אחת
- קופון אחד

### 2. Combined Discounts (הנחות מצטברות)
מספר הנחות שפועלות יחד.

**דוגמאות:**
- הנחה אוטומטית + קופון
- מספר הנחות אוטומטיות
- מספר קופונים

**הגדרות:**
- `can_combine_with_codes` - האם ניתן לשלב עם קופונים
- `can_combine_with_other_automatic` - האם ניתן לשלב עם הנחות אוטומטיות אחרות
- `max_combined_discounts` - מקסימום הנחות מצטברות

---

## 📊 סדר עדיפויות

### עדיפות 1: הנחות אוטומטיות
הנחות אוטומטיות תמיד מחושבות קודם.

**סדר:**
1. מיון לפי `priority` (גבוה יותר = קודם)
2. החלה לפי סדר עדיפות
3. כל הנחה מחושבת על המחיר אחרי הנחות קודמות

### עדיפות 2: קופונים
קופונים מחושבים אחרי הנחות אוטומטיות.

**סדר:**
1. בדיקת שילוב עם הנחות אוטומטיות
2. אם ניתן לשלב - החלה
3. אם לא ניתן לשלב - אזהרה

---

## ✅ רשימת כל סוגי ההנחות (Checklist)

### הנחות אוטומטיות:
- [x] Percentage (אחוז)
- [x] Fixed Amount (סכום קבוע)
- [x] Free Shipping (משלוח חינם)
- [x] לפי סכום מינימום/מקסימום
- [x] לפי כמות מינימום/מקסימום
- [x] על כל המוצרים
- [x] על מוצרים ספציפיים
- [x] על קטגוריות ספציפיות
- [x] על תגיות ספציפיות
- [x] לפי לקוח (VIP, חדש, חוזר)
- [x] לפי מספר הזמנות
- [x] לפי ערך חיים
- [x] לפי תאריך/שעה
- [x] לפי יום בשבוע
- [x] לפי שעה ביום
- [x] עדיפויות
- [x] שילובים

### קופונים:
- [x] Percentage (אחוז)
- [x] Fixed Amount (סכום קבוע)
- [x] Free Shipping (משלוח חינם)
- [x] לפי סכום מינימום/מקסימום
- [x] על כל המוצרים
- [x] על מוצרים ספציפיים
- [x] על קטגוריות ספציפיות
- [x] על תגיות ספציפיות
- [x] תוקף תאריכים
- [x] מגבלת שימוש
- [x] מעקב שימוש
- [x] שילוב עם הנחות אוטומטיות
- [x] עדיפויות

---

## 🎯 דוגמאות שימוש

### דוגמה 1: הנחה אוטומטית פשוטה
```
שם: "10% הנחה על כל המוצרים"
סוג: percentage
ערך: 10
חל על: כל המוצרים
עדיפות: 0
```

### דוגמה 2: הנחה אוטומטית מורכבת
```
שם: "20% הנחה ל-VIP על הזמנות מעל ₪500"
סוג: percentage
ערך: 20
סכום מינימום: ₪500
לקוח: VIP
עדיפות: 10
```

### דוגמה 3: קופון עם תנאים
```
קוד: "SUMMER20"
סוג: percentage
ערך: 20
סכום מינימום: ₪300
תוקף: 1/6 - 31/8
מגבלת שימוש: 100
```

### דוגמה 4: הנחה לפי זמן
```
שם: "15% הנחה בימי שישי"
סוג: percentage
ערך: 15
יום בשבוע: שישי
שעה: 10:00-14:00
```

---

**כל סוגי ההנחות מיושמים במנוע החישוב המרכזי!** 🎯

