# למה CSV לא כולל וריאציות?

## ❌ הבעיה

הייצוא של קוויק שופ הישן **לא כולל וריאציות** ב-CSV.

### מה יש ב-CSV:
```
ID,"שם מוצר",סלאג,תיאור,"מחיר רגיל","מחיר מבצע",מקט,"כמות במלאי",...
21235,"מסיכה לשיער ארגן",...,50.90,0.00,7290016299892,0,...
```

**כל שורה = מוצר אחד** עם:
- מחיר אחד
- SKU אחד
- מלאי אחד
- **ללא אפשרויות (Size, Color, וכו')**

### מה חסר:
- ❌ אין עמודות של אפשרויות (Option 1, Option 2, וכו')
- ❌ אין שורות נפרדות לכל וריאציה
- ❌ אין מחירים שונים לווריאציות
- ❌ אין SKU שונים לווריאציות

---

## ✅ הפתרון

### למוצרים רגילים (ללא וריאציות):
**→ השתמש ב-CSV** - פשוט ומהיר!

### למוצרים עם וריאציות:
**→ השתמש בכלי ההעברה המלא** (`scripts/migrate-from-old-quickshop.ts`)

הכלי המלא:
- ✅ קורא ישירות מה-DB הישן
- ✅ מבין את מבנה הווריאציות
- ✅ מעביר את כל הווריאציות נכון
- ✅ יוצר `product_options` ו-`product_option_values`
- ✅ מעביר תמונות לווריאציות

---

## 🔍 איך לדעת אם מוצר יש לו וריאציות?

במערכת הישנה, בדוק:
1. **בטבלה `products`:**
   - `product_type = 'variable'` → יש וריאציות
   - `product_type = 'regular'` → אין וריאציות

2. **בטבלה `product_variants`:**
   - אם יש יותר מ-1 variant → יש וריאציות
   - אם יש רק 1 variant → כנראה מוצר רגיל

---

## 📋 תהליך עבודה מומלץ

### שלב 1: בדיקה
```sql
-- בדוק כמה מוצרים יש עם וריאציות
SELECT COUNT(*) FROM products 
WHERE product_type = 'variable' 
AND store_id = 310;
```

### שלב 2: העברה

#### למוצרים רגילים:
1. ייצא CSV מהמערכת הישנה
2. ייבא CSV למערכת החדשה
3. ✅ סיימת!

#### למוצרים עם וריאציות:
1. השתמש בכלי ההעברה המלא:
   ```bash
   npx ts-node scripts/migrate-from-old-quickshop.ts \
     --store-slug argania \
     --new-store-id 1 \
     --dry-run
   ```

---

## 💡 אפשרויות עתידיות

אם תרצה, אפשר להוסיף תמיכה בוריאציות ב-CSV:

### פורמט אפשרי:
```csv
ID,"שם מוצר",...,"Option 1","Option 2","מחיר וריאציה","SKU וריאציה","מלאי וריאציה"
21235,"מסיכה",...,"Size","S",50.90,SKU-001,10
21235,"מסיכה",...,"Size","M",50.90,SKU-002,15
21235,"מסיכה",...,"Size","L",50.90,SKU-003,20
```

**אבל זה דורש:**
1. שינוי בייצוא של המערכת הישנה
2. שינוי בייבוא של המערכת החדשה
3. לוגיקה מורכבת יותר

**לעת עתה, הכלי המלא הוא הפתרון הטוב ביותר.**

---

## ✅ סיכום

- ✅ **CSV** = מושלם למוצרים רגילים
- ✅ **כלי העברה מלא** = מושלם למוצרים עם וריאציות
- ✅ **שניהם יחד** = פתרון מלא!

