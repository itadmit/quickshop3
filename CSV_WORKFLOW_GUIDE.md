# מדריך עבודה עם CSV - ייצוא וייבוא

## ✅ כן, אפשר לעבוד רק עם CSV!

המערכת תומכת בעבודה מלאה עם CSV:
- ✅ **ייצוא** מהמערכת הישנה → CSV
- ✅ **ייבוא** למערכת החדשה ← CSV

---

## 📤 ייצוא מהמערכת הישנה

### מה יש ב-CSV של קוויק שופ הישן:

הקובץ כולל את השדות הבאים:
- ✅ ID מוצר
- ✅ שם מוצר
- ✅ סלאג
- ✅ תיאור
- ✅ מחיר רגיל
- ✅ מחיר מבצע
- ✅ מקט (SKU)
- ✅ כמות במלאי
- ✅ התעלם ממלאי
- ✅ מוסתר
- ✅ קטגוריות
- ✅ תגים
- ✅ סוג מוצר
- ✅ תמונה ראשית
- ✅ תאריך יצירה

### מה **אין** ב-CSV:

- ❌ **וריאציות** - רק מוצרים רגילים (ללא אפשרויות)
- ❌ **גלריית תמונות** - רק תמונה ראשית אחת
- ❌ **תמונות של וריאציות** - לא נתמך

---

## 📥 ייבוא למערכת החדשה

### איך זה עובד:

1. **ייצוא CSV** מהמערכת הישנה
2. **ייבוא CSV** למערכת החדשה דרך:
   - הדשבורד: Products → Import
   - או דרך API

### מה קורה בייבוא:

1. ✅ **יוצר מוצר** עם כל הפרטים
2. ✅ **יוצר variant ברירת מחדל** עם "Default Title"
3. ✅ **שומר מחיר ומלאי** ב-variant
4. ✅ **מוריד תמונות מ-S3**
5. ✅ **ממיר ל-WebP** (אם צריך)
6. ✅ **מעלה ל-Cloudinary**
7. ✅ **שומר ב-`media_files`** (כאילו הועלה ידנית)
8. ✅ **שומר ב-`product_images`** (קישור למוצר)

---

## 🎯 מתי להשתמש ב-CSV ומתי בכלי המלא?

### ✅ CSV מתאים ל:

- ✅ **מוצרים רגילים** (ללא וריאציות)
- ✅ **מוצרים עם מחיר אחד**
- ✅ **מוצרים עם תמונה ראשית אחת**
- ✅ **העברה מהירה ופשוטה**

### ❌ CSV לא מתאים ל:

- ❌ **מוצרים עם וריאציות** (Size, Color, וכו')
- ❌ **מוצרים עם מחירים שונים לווריאציות**
- ❌ **מוצרים עם גלריית תמונות**
- ❌ **מוצרים עם תמונות לווריאציות**

**למוצרים עם וריאציות → צריך להשתמש בכלי ההעברה המלא** (`scripts/migrate-from-old-quickshop.ts`)

---

## 📋 תהליך עבודה מומלץ

### שלב 1: בדיקה

1. ייצא CSV מהמערכת הישנה
2. בדוק כמה מוצרים יש
3. בדוק כמה מהם עם וריאציות

### שלב 2: העברה

#### למוצרים רגילים:
1. ייבא את ה-CSV דרך הדשבורד
2. כל מוצר יקבל variant אחד עם "Default Title"
3. התמונות יעברו אוטומטית מ-S3 ל-Cloudinary

#### למוצרים עם וריאציות:
1. השתמש בכלי ההעברה המלא:
   ```bash
   npx ts-node scripts/migrate-from-old-quickshop.ts \
     --store-slug argania \
     --new-store-id 1 \
     --dry-run
   ```

### שלב 3: אימות

1. בדוק שהמוצרים נוצרו נכון
2. בדוק שהתמונות עלו
3. בדוק שהמחירים והמלאי נכונים

---

## 🔧 הגדרות נדרשות

### להעברת תמונות:

```env
# Cloudinary (חובה)
CLOUDINARY_URL=cloudinary://...

# S3 (אופציונלי - לניסיון אוטומטי)
OLD_S3_BASE_URL=https://s3.amazonaws.com/bucket-name
# או:
OLD_S3_BUCKET=bucket-name
OLD_S3_REGION=us-east-1
```

---

## ✅ יתרונות עבודה עם CSV

1. ✅ **פשוט ומהיר** - ייצוא וייבוא בלחיצה אחת
2. ✅ **אוטומטי** - התמונות עוברות אוטומטית
3. ✅ **תמיכה בעברית** - כל השדות בעברית נתמכים
4. ✅ **אופטימיזציה** - תמונות מומרות ל-WebP אוטומטית

---

## ⚠️ מגבלות

1. ⚠️ **רק מוצרים רגילים** - לא וריאציות
2. ⚠️ **רק תמונה ראשית** - לא גלריה
3. ⚠️ **לא תמונות לווריאציות**

---

## 📝 סיכום

**כן, אפשר לעבוד רק עם CSV!**

- ✅ למוצרים רגילים → CSV מושלם
- ❌ למוצרים עם וריאציות → צריך כלי העברה מלא

**המלצה:**
1. ייבא את כל המוצרים הרגילים דרך CSV
2. העבר את המוצרים עם וריאציות דרך הכלי המלא

זה ייתן לך את המהירות של CSV עם הגמישות של הכלי המלא!

